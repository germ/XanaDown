function createGrid(grid) {
    const coordFields = [
        ['x', 'y'],
        ['left', 'top'],
        ['right', 'bottom'],
        ['width', 'height'],
    ].filter(([xField, yField]) => xField in grid || yField in grid);
    return function (x, y) {
        const { range, limits = {
            left: -Infinity,
            right: Infinity,
            top: -Infinity,
            bottom: Infinity,
        }, offset = { x: 0, y: 0 }, } = grid;
        const result = { range };
        for (const [xField, yField] of coordFields) {
            const gridx = Math.round((x - offset.x) / grid[xField]);
            const gridy = Math.round((y - offset.y) / grid[yField]);
            result[xField] = Math.max(limits.left, Math.min(limits.right, gridx * grid[xField] + offset.x));
            result[yField] = Math.max(limits.top, Math.min(limits.bottom, gridy * grid[yField] + offset.y));
        }
        return result;
    };
}
export default createGrid;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JpZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImdyaWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxVQUFVLENBQUUsSUFBMEc7SUFDN0gsTUFBTSxXQUFXLEdBQUc7UUFDbEIsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO1FBQ1YsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDO1FBQ2YsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDO1FBQ25CLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQztLQUNwQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQTtJQUVoRSxPQUFPLFVBQVUsQ0FBQyxFQUFFLENBQUM7UUFDbkIsTUFBTSxFQUNKLEtBQUssRUFDTCxNQUFNLEdBQUc7WUFDUCxJQUFJLEVBQUksQ0FBQyxRQUFRO1lBQ2pCLEtBQUssRUFBSSxRQUFRO1lBQ2pCLEdBQUcsRUFBSyxDQUFDLFFBQVE7WUFDakIsTUFBTSxFQUFHLFFBQVE7U0FDbEIsRUFDRCxNQUFNLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FDeEIsR0FBRyxJQUFJLENBQUE7UUFFUixNQUFNLE1BQU0sR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFBO1FBRXhCLEtBQUssTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsSUFBSSxXQUFXLEVBQUU7WUFDMUMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUE7WUFDdkQsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUE7WUFFdkQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUMvRixNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQ2hHO1FBRUQsT0FBTyxNQUFNLENBQUE7SUFDZixDQUFDLENBQUE7QUFDSCxDQUFDO0FBRUQsZUFBZSxVQUFVLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBjcmVhdGVHcmlkIChncmlkOiAoSW50ZXJhY3QuUmVjdCB8IEludGVyYWN0LlBvaW50KSAmIHsgcmFuZ2U/OiBudW1iZXIsIGxpbWl0czogSW50ZXJhY3QuUmVjdCwgb2Zmc2V0OiBJbnRlcmFjdC5Qb2ludCB9KSB7XG4gIGNvbnN0IGNvb3JkRmllbGRzID0gW1xuICAgIFsneCcsICd5J10sXG4gICAgWydsZWZ0JywgJ3RvcCddLFxuICAgIFsncmlnaHQnLCAnYm90dG9tJ10sXG4gICAgWyd3aWR0aCcsICdoZWlnaHQnXSxcbiAgXS5maWx0ZXIoKFt4RmllbGQsIHlGaWVsZF0pID0+IHhGaWVsZCBpbiBncmlkIHx8IHlGaWVsZCBpbiBncmlkKVxuXG4gIHJldHVybiBmdW5jdGlvbiAoeCwgeSkge1xuICAgIGNvbnN0IHtcbiAgICAgIHJhbmdlLFxuICAgICAgbGltaXRzID0ge1xuICAgICAgICBsZWZ0ICA6IC1JbmZpbml0eSxcbiAgICAgICAgcmlnaHQgOiAgSW5maW5pdHksXG4gICAgICAgIHRvcCAgIDogLUluZmluaXR5LFxuICAgICAgICBib3R0b206ICBJbmZpbml0eSxcbiAgICAgIH0sXG4gICAgICBvZmZzZXQgPSB7IHg6IDAsIHk6IDAgfSxcbiAgICB9ID0gZ3JpZFxuXG4gICAgY29uc3QgcmVzdWx0ID0geyByYW5nZSB9XG5cbiAgICBmb3IgKGNvbnN0IFt4RmllbGQsIHlGaWVsZF0gb2YgY29vcmRGaWVsZHMpIHtcbiAgICAgIGNvbnN0IGdyaWR4ID0gTWF0aC5yb3VuZCgoeCAtIG9mZnNldC54KSAvIGdyaWRbeEZpZWxkXSlcbiAgICAgIGNvbnN0IGdyaWR5ID0gTWF0aC5yb3VuZCgoeSAtIG9mZnNldC55KSAvIGdyaWRbeUZpZWxkXSlcblxuICAgICAgcmVzdWx0W3hGaWVsZF0gPSBNYXRoLm1heChsaW1pdHMubGVmdCwgTWF0aC5taW4obGltaXRzLnJpZ2h0LCBncmlkeCAqIGdyaWRbeEZpZWxkXSArIG9mZnNldC54KSlcbiAgICAgIHJlc3VsdFt5RmllbGRdID0gTWF0aC5tYXgobGltaXRzLnRvcCwgTWF0aC5taW4obGltaXRzLmJvdHRvbSwgZ3JpZHkgKiBncmlkW3lGaWVsZF0gKyBvZmZzZXQueSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUdyaWRcbiJdfQ==